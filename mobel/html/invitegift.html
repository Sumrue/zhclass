<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<meta name="format-detection" content="telephone=no">
		<meta name="full-screen" content="yes">
		<meta name="browsermode" content="application">
		<meta name="x5-orientation" content="portrait">
		<meta name="x5-fullscreen" content="true">
    <meta name="x5-page-mode" content="app">
    <link rel="stylesheet" href="https://res.wx.qq.com/open/libs/weui/2.0.1/weui.min.css">
    <link rel="stylesheet" href="{MODULE_URL}template/mobile/{$template}/style/cssv2/invitegift.css">
		<title>
      邀请有礼
		</title>
		<style>
			.nowinvi {
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				background: rgb(0, 0, 0,.7);
				display: none;
			}
			.nowinvi>.bg {
				position: absolute;
				top: .2rem;
				right: .2rem;
				width: 1.6rem;
			}
			.nowinvi>.bg>img {
				width: 100%;
			}
			.nowinvi>.content {
				position: absolute;
				text-align: center;
				color: #fff;
				width: 2.8rem;
				top: 1.6rem;
				right: 1.3rem;
			}
		</style>
  </head>
	<body data-weui-theme="light">
		<div class="page-container" id="page-container">
			<div class="invitegift_page">
				<div class="navbar">
					<div class="nav_item nav_item_on">邀约有礼</div>
					<div class="nav_item">邀请排行榜</div>
					<div class="nav_item">我的邀请</div>
				</div>

				<div class="panel_box">
					<div class="panel panel_on">
						<div class="panerl_one">
							<!-- 邀约限时活动广告 -->
							<!-- <div class="advert">
								<p>
									8月9日19:00 - 9月10日16:00期间，邀请好友报读缴费，额外奖励<span>15000积分</span></p>
							</div> -->
							<!-- 主要内容区 -->
							<div class="content_box">
								<div class="rules">活动规则</div>
								<div class="content">
									<div class="content_title">
										·  邀请朋友还能得积分  ·
									</div>
									<div class="content_flow">
										<div class="content_flow_img">
											<img src="{MODULE_URL}template/mobile/{$template}/images/index/invite_flow_bg.png" alt="">
										</div>
									</div>
									<div class="content_question">
										<p>* 积分可以在四川联合教育 <a href="{php echo $this->createMobileUrl('shoppingmall');}">积分商城 </a>兑换精美礼品</p>
										<p>* <a href="{php echo $this->createMobileUrl('strategy');}">什么是积分？</a></p>
									</div>
								</div>
							</div>
							<!-- 活动规则 -->
							<div class="rules_show rules_show_hidden">
								<div class="rules_text">
									<p class="title">活动规则</p>
									<!-- <p class="t0">活动时间</p>
									<p class="t1">8月19日19:00~~9月10日16:00</p> -->
									<p class="t0">活动详情</p>
									<p class="t2">活动期间<span>邀请人</span>每邀请一名新注册用户，在原有积分奖励基础上</p>
									<p class="t2">
										1、报读自考并缴费，再额外奖励15000积分； <br>
										2、报读成教并购买成考辅导礼包，再额外奖励15000积分； <br>
										3、报读国开并缴第1学期学费，再额外奖励15000积分；<br>
										4、若被邀请人退学，则视为无效推荐，自动收回邀请人的相应积分；<br>
										5、若被邀请人报读专本连读，则以第一次报读缴费记录为准，只赠送一次15000积分;<br>
									</p>
									<p class="t3">最终解释权归四川联合教育所有</p>
									<img src="{MODULE_URL}template/mobile/{$template}/images/index/closeX.png" alt="" class="closeX">
								</div>
							</div>
							<div style="height: .7rem;"></div>
							<div class="footer"><button class="totoqrode"><a href="javascript::;">生成邀请专属海报</a></button> <button class="nowinvi_btn">立即邀请</button></div>
						</div>
					</div>
					<!-- 排行榜 -->
					<div class="panel">
						<div class="panel_two">
							<div class="rank_top">
								<div class="month">
									积分排名
								</div>
								<div class="invite_friend">
									<p class="t1">邀请好友报读</p>
									<p class="t2">奖励好友同等支付的金额数积分</p>
									<div data-v-90ad5ac0="" class="partner">
										<div data-v-90ad5ac0="" class="head">
											<img data-v-90ad5ac0="" src="{MODULE_URL}template/mobile/{$template}/images/index/invite_friend_head.png" alt="">
											<img data-v-90ad5ac0="" src="{MODULE_URL}template/mobile/{$template}/images/index/invite_friend_head.png" alt="">
											<img data-v-90ad5ac0="" src="{MODULE_URL}template/mobile/{$template}/images/index/invite_friend_head.png" alt="">
											<img data-v-90ad5ac0="" src="{MODULE_URL}template/mobile/{$template}/images/index/invite_friend_head.png" alt="">
											<img data-v-90ad5ac0="" src="{MODULE_URL}template/mobile/{$template}/images/index/invite_friend_head.png" alt="">
										</div> 
										<a href="" class="enrolled">
											已邀请<span>0</span>位好友
										</a>
									</div>
								</div>
							</div>
							<div class="rank_list">
								<div class="rank_navbar">
									<div class="rank_nav_item rank_nav_on">邀请奖励排行榜</div>
									<div class="rank_nav_item">邀请人数排行榜</div>
								</div>
								<div class="rank_panel_box ">

									<!-- 邀请奖励排行榜 -->
									<div class="rank_panel rank_panel_on ranking_gift">
										<div class="rank_list_title">
											<span class="rank_rank">排名</span>
											<span class="rank_user">邀请奖励</span>
											<span class="rank_result">兑换记录</span>
										</div>
										<div class="rank_list_items">
											<div class="rank_list_my">
												<span class="rank_top_list">1000+</span>
												<div class="rank_msg">
													<div class="rank_item_head"><img src="{php echo $userMsg['headimgurl']}" alt=""></div>
													<div class="rank_item_content">
														<div class="rank_content_lt">
															<p>{php echo $userMsg['nickname']}</p>
															<p class="bulu">奖励积分:<span>{php echo $userMsg2['credit1'];}</span></p>
														</div>
														<div class="rank_content_rt">
															<span>兑换礼品</span>
															<img src="{MODULE_URL}template/mobile/{$template}/images/index/rank_detal_phone.jpg" alt="">
														</div>
														<div class="clear"></div>
													</div>
												</div>
											</div>
	
											<!-- <div class="rank_list_item">
												<div class="ranking">
													<img src="{MODULE_URL}template/mobile/{$template}/images/index/ranking_first.png" alt="" class="ranking_top_pic">
												</div>
												<div class="rank_msg">
													<div class="rank_item_head"><img src="{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png" alt=""></div>
													<div class="rank_item_content">
														<div class="rank_content_lt">
															<p>夏***</p>
															<p class="bulu">奖励之谜:<span>0</span></p>
														</div>
														<div class="rank_content_rt">
															<span>兑换礼品</span>
															<img src="{MODULE_URL}template/mobile/{$template}/images/index/rank_detal_phone.jpg" alt="">
														</div>
														<div class="clear"></div>
													</div>
												</div>
												<div class="clear"></div>
											</div> -->
	
										</div>
									</div>

									<!-- 邀请人数榜单 -->
									<div class="rank_panel rank_people">
										<div class="rank_list_title">
											<span class="rank_rank">排名</span>
											<span class="rank_user">用户</span>
											<span class="rank_result">邀请成绩</span>
										</div>
										<div class="rank_list_items">
											<div class="rank_list_my">
												<span class="rank_top_list">1000+</span>
												<div class="rank_msg">
													<div class="rank_item_head"><img src="{php echo $userMsg['headimgurl']}" alt=""></div>
													<div class="rank_item_content"><span>{php echo $userMsg['nickname']}</span><span class="invite_num bulu">邀请: <i>0</i></span></div>
												</div>
											</div>
											
											<!-- <div class="rank_list_item">
												<div class="ranking">
													<img src="{MODULE_URL}template/mobile/{$template}/images/index/ranking_first.png" alt="" class="ranking_top_pic">
												</div>
												<div class="rank_msg">
													<div class="rank_item_head"><img src="{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png" alt=""></div>
													<div class="rank_item_content"><span>夏**</span><span class="invite_num bulu">邀请: <i>0</i></span></div>
												</div>
											</div> -->
	
										</div>
									</div>
								</div>
							</div>
							<div class="footer_rank_update">排行榜数据每小时更新</div>
							<!-- 排行榜轮播 -->
							<div class="banner_apply">
								<ul class="banner_apply_box">	
								</ul>
							</div>

							<!-- 邀请攻略 -->
							<a href="{php echo $this->createMobileUrl('strategy', array('do'=>'strategy'));}" class="invite_method">邀请攻略</a>
						</div>
						<div style="height: .8rem;"></div>
						<div class="footer"><button class="totoqrode"><a href="javascript::;">生成邀请专属海报</a></button> <button class="nowinvi_btn">立即邀请</button></div>
					</div>
					<div class="panel">
						<div class="my_invite">
							<div class="my_invite_head">
								<div class="integral">
									<div class="integral_lt">
										<div class="view1" id="dig2">获得总积分</div>
										<div class="view2">123</div>
									</div>
									<div class="integral_rt">
										<div class="view1">累计到账积分</div>
										<div class="view2">0</div>
									</div>
								</div>
								<div class="view3">
									共邀请 <span>0</span> 人
								</div>
							</div>

							<div class="my_invite_items">
								<div class="nodata">
									<img src="{MODULE_URL}template/mobile/{$template}/images/index/invite_no-data.png" alt="">
									<p>暂无邀请学员～<br>快去邀请好友赚积分吧</p>
								</div>
							</div>
							<div class="footer"><button class="totoqrode"><a href="javascript::;">生成邀请专属海报</a></button> <button class="nowinvi_btn">立即邀请</button></div>
							<div class="js_dialog" id="iosDialog2" style="display: none;">
								<div class="weui-mask"></div>
								<div class="weui-dialog">
										<div class="weui-dialog__bd">
											<i class="weui-icon-warn weui-icon_msg"></i>
											<p>实际到账奖励积分数 = 学院实际缴纳金额数</p>
										</div>
										<div class="weui-dialog__ft">
												<a href="javascript:" class="weui-dialog__btn weui-dialog__btn_primary" id="close_my">知道了</a>
										</div>
								</div>
						</div>
						</div>
					</div>
				</div>
				<div class="nowinvi">
					<div class="bg">
						<img src="{MODULE_URL}template/mobile/{$template}/images/index/invitgift_invitbg.png" alt="">
					</div>
					<div class="content">
						请点击右上角
						<br>
						将它发送给指定朋友
						<br>
						或者分享到朋友圈
					</div>
				</div>
			</div>
		</div>
</body>

<script type="text/javascript" src="{MODULE_URL}template/mobile/{$template}/style/jsv2/jquery.min.js?v={$versions}"></script>
<script type="text/javascript" src="{MODULE_URL}template/mobile/{$template}/style/js/m-fit.js"></script>
<script type="text/javascript" src="https://res.wx.qq.com/open/libs/weuijs/1.2.1/weui.min.js"></script>
<script type="text/javascript">
	$(function(){
		// 动态渲染排行榜html
				// 邀请人数排行榜
		let rankListItemData = [
			{ranking: 1,name: '大开口',headPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png',invite: 20},
			{ranking: 1,name: '打发',headPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png',invite: 20},
			{ranking: 2,name: '噶服务',headPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png',invite: 20},
			{ranking: 2,name: '大会上',headPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png',invite: 20},
			{ranking: 3,name: '华盛顿法',headPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png',invite: 20},
			{ranking: 4,name: '华东师范',headPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png',invite: 20},
			{ranking: 5,name: '嘎达是',headPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png',invite: 20},
			{ranking: 6,name: '啊哈斯',headPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png',invite: 20},
			{ranking: 7,name: 'gas的',headPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png',invite: 20},
			{ranking: 8,name: '阿萨德高升',headPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png',invite: 20},
		]
		let rankListItems = $('.rank_people>.rank_list_items')
		let rankListItemHtml = ''
		for (let i = 0; i < rankListItemData.length; i++) {
			let myname  = rankListItemData[i].name
			rankListItemHtml += `
				<div class="rank_list_item">
					<div class="ranking">
						<div class="ranking_num">${rankListItemData[i].ranking}</div>
					</div>
					<div class="rank_msg">
						<div class="rank_item_head"><img src="${rankListItemData[i].headPic}" alt=""></div>
						<div class="rank_item_content"><span>${myname.slice(0,1)}**</span><span class="invite_num bulu">邀请: <i>${rankListItemData[i].invite}</i></span></div>
					</div>
				</div>
			`
		}
		rankListItems.append(rankListItemHtml)

				// 邀请兑换排行榜
		let invitGiftNum = [
			{ranking: 1,name: '大开adf口',headPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png',invite: 1324, goodsPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_detal_phone.jpg'},
			{ranking: 1,name: '打asdf发',headPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png',invite: 1324, goodsPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_detal_phone.jpg'},
			{ranking: 2,name: '噶asdf服务',headPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png',invite: 1324, goodsPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_detal_phone.jpg'},
			{ranking: 2,name: '大adf会上',headPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png',invite: 1324, goodsPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_detal_phone.jpg'},
			{ranking: 3,name: 'afd华盛顿法',headPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png',invite: 1324, goodsPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_detal_phone.jpg'},
			{ranking: 4,name: '华asdf东师范',headPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png',invite: 1324, goodsPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_detal_phone.jpg'},
			{ranking: 5,name: 'adsf嘎达是',headPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png',invite: 1324, goodsPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_detal_phone.jpg'},
			{ranking: 6,name: '啊asdf哈斯',headPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png',invite: 1324, goodsPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_detal_phone.jpg'},
			{ranking: 7,name: 'gagas的s的',headPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png',invite: 1324, goodsPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_detal_phone.jpg'},
			{ranking: 8,name: '阿安抚萨德高升',headPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png',invite: 1324, goodsPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_detal_phone.jpg'}
		]
		let goodsRankingItems = $('.ranking_gift>.rank_list_items')
		let goodsRankingItemHtml = ''
		for(let i = 0; i < invitGiftNum.length; i++){
			let myname = invitGiftNum[i].name
			goodsRankingItemHtml += `
				<div class="rank_list_item">
					<div class="ranking">
						<div class="ranking_num">${invitGiftNum[i].ranking}</div>
					</div>
					<div class="rank_msg">
						<div class="rank_item_head"><img src="${invitGiftNum[i].headPic}" alt=""></div>
						<div class="rank_item_content">
							<div class="rank_content_lt">
								<p>${myname.slice(0,1)}**</p>
								<p class="bulu">奖励积分:<span>${invitGiftNum[i].invite}</span></p>
							</div>
							<div class="rank_content_rt">
								<span>兑换礼品</span>
								<img src="${invitGiftNum[i].goodsPic}" alt="">
							</div>
							<div class="clear"></div>
						</div>
					</div>
					<div class="clear"></div>
				</div>
			`
		}
		goodsRankingItems.append(goodsRankingItemHtml)

		// 轮播，兑换数据渲染
		let bannerData = [
			{ranking: 1,name: '大开adf口',headPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png',invite: 1324,goodsName: '老腊adfasdfsd肉'},
			{ranking: 1,name: '啊啊地方',headPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png',invite: 1234,goodsName: '老腊sadfasdfasdgasd肉2'},
			{ranking: 1,name: '阿斯顿发送到',headPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png',invite: 513,goodsName: '老gasdfasdf腊肉3'},
			{ranking: 1,name: 'gadfly',headPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png',invite: 132,goodsName: '老腊阿达水电费肉4dgadabad'},
			{ranking: 1,name: '阿斯蒂芬',headPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png',invite: 51,goodsName: '老腊asdfasfa肉5'},
			{ranking: 1,name: '发斯蒂芬',headPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png',invite: 123,goodsName: '老腊肉6'},
			{ranking: 1,name: 'gas的',headPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png',invite: 5123,goodsName: '老腊肉7'},
			{ranking: 1,name: '阿斯蒂芬',headPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png',invite: 5123,goodsName: '老腊肉8'},
			{ranking: 1,name: '阿斯蒂芬',headPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png',invite: 1234,goodsName: '老阿斯顿发送到腊肉9'},
			{ranking: 1,name: '阿斯顿发斯蒂芬',headPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png',invite: 5245,goodsName: '老腊肉10'},
			{ranking: 1,name: '阿斯蒂芬',headPic: '{MODULE_URL}template/mobile/{$template}/images/index/rank_msg_head.png',invite: 6622,goodsName: '老腊肉1阿阿斯达斯阿斯蒂芬顿发斯蒂芬0'}
		]

		let bannerItems = $('.banner_apply_box')
		bannerItemHtm = ''
		for(let i = 0; i < bannerData.length; i++){
			let myname = bannerData[i].name
			let goodName = bannerData[i].goodsName
			bannerItemHtm += `
				<li class="banner_apply_item banner_tt_i">
					<div class="img_box">
						<img src="${bannerData[i].headPic}" alt="">
					</div>
					<div class="apply_text"><span class="apply_name">${myname.slice(0,1)}**</span> <span class="banner_goods_text"> 成功用${bannerData[i].invite}积分兑换了${goodName.slice(0,8)}</span></div>
				</li>
			`
		}
		bannerItems.append(bannerItemHtm)

		let wpc = '{php echo json_encode($_W);}'
		// 导航及对应页面切换
		let navItem = $('.nav_item')
		let panelItem = $('.panel')
		navItem.on('click', function () {
			let $this = $(this)
			let index = $this.index()
			$this.addClass('nav_item_on').siblings('.nav_item_on').removeClass('nav_item_on'); // 切换导航
			panelItem.eq(index).addClass('panel_on').siblings('.panel_on').removeClass('panel_on'); // 导航对应内容页切换
			});

		// 活动规则盒子弹出和关闭
		let rulseShow = $('.rules')
		let rulseClose = $('.closeX')
		let rulseBox = $('.rules_show')
		rulseShow.click(
			function(){
				rulseBox.fadeIn(200)
			}
		)
		rulseClose.click(function(){
			rulseBox.fadeOut(200)
		})

		// 排行榜中部排行榜单切换
		let rankNavItem = $('.rank_nav_item')
		let rankPanel = $('.rank_panel')
		rankNavItem.click(
			function(){
				let $this = $(this)
				let index = $this.index()
				$this.addClass('rank_nav_on').siblings('.rank_nav_on').removeClass('rank_nav_on')
				rankPanel.eq(index).addClass('rank_panel_on').siblings('.rank_panel_on').removeClass('rank_panel_on')
			}
		)

		// 排行榜轮播
		let banner = function(){
      let bannerApplyItems = $('.banner_apply_box')
      let itemIndex = $('.banner_tt_i').length
      let newItemIndex = itemIndex
      let itemHt = $('.banner_apply_item').height()
      var n = 0
      setInterval(() => {
        n ++
        if(n>newItemIndex-1) {
          n = 0
          bannerApplyItems.css('top',0)
        }
        bannerApplyItems.animate(
          {top: -itemHt*n}
        )
      },2000);
     }
    banner()

		let $iosDialog2 = $('#iosDialog2')
		$('#dig2').on('click', function(){
            $iosDialog2.fadeIn(200);
    });
		$('#close_my').click(function(){
			$('.js_dialog').fadeOut(200)
		})
		// 分享链接时判断权限，是否注册手机号
		$('.nowinvi_btn').on('click',function(){
			let phone = {php echo json_encode($_W["member"]["mobile"])};
			if(phone == '') {
				location.href = '{php echo $this->createMobileUrl("writemsg", array("do"=>"writemsg","op"=>"modifyMobile"));}'
			} else {
				$('.nowinvi').css('display','block')
			}
		})
		$('.nowinvi').on('click',function(){
			console.log(2)
			$('.nowinvi').css('display','none')
		})

		// 生成海报时的东西时判定权限
		let totoqrode = $('.totoqrode')
		totoqrode.click(function(){
			let phone = {php echo json_encode($_W["member"]["mobile"])};
			if(phone == '') {
				location.href = '{php echo $this->createMobileUrl("writemsg", array("do"=>"writemsg","op"=>"modifyMobile"));}'
			} else {
				location.href = '{php echo $this->createMobileUrl("qrcode");}'
			}
		})
	});
</script>
</html>